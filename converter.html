<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python to Java Converter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .converter-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 600px;
        }

        .input-section, .output-section {
            display: flex;
            flex-direction: column;
        }

        .section-header {
            padding: 20px;
            font-weight: bold;
            font-size: 1.2em;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .input-section .section-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .output-section .section-header {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .code-area {
            flex: 1;
            border: none;
            padding: 25px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
            background: #f8f9fa;
            color: #2c3e50;
        }

        .code-area:focus {
            background: #fff;
        }

        .output-area {
            flex: 1;
            padding: 25px;
            background: #f8f9fa;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-y: auto;
            color: #2c3e50;
        }

        .controls {
            padding: 30px;
            background: #ecf0f1;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-convert {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-convert:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.6);
        }

        .btn-clear {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.4);
        }

        .btn-clear:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(149, 165, 166, 0.6);
        }

        .btn-copy {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-copy:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.6);
        }

        .examples {
            padding: 30px;
            background: #fff;
        }

        .examples h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
            font-size: 1.3em;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .example {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .example:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .example h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .example code {
            display: block;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .converter-container {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #27ae60;
            color: white;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêç ‚û°Ô∏è ‚òï Python to Java Converter</h1>
            <p>Transform your Python code into Java with intelligent syntax conversion</p>
        </div>

        <div class="converter-container">
            <div class="input-section">
                <div class="section-header">Python Code Input</div>
                <textarea class="code-area" id="pythonInput" placeholder="Enter your Python code here...

# Example:
def greet(name):
    print(f'Hello, {name}!')
    
greet('World')"></textarea>
            </div>

            <div class="output-section">
                <div class="section-header">Java Code Output</div>
                <div class="output-area" id="javaOutput">Converted Java code will appear here...</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-convert" onclick="convertCode()">üöÄ Convert</button>
            <button class="btn btn-clear" onclick="clearAll()">üóëÔ∏è Clear All</button>
            <button class="btn btn-copy" onclick="copyOutput()">üìã Copy Java Code</button>
        </div>

        <div class="examples">
            <h3>Quick Examples - Click to Try</h3>
            <div class="example-grid">
                <div class="example" onclick="loadExample(0)">
                    <h4>Basic Function</h4>
                    <code>def add(a, b):
    return a + b</code>
                </div>
                <div class="example" onclick="loadExample(1)">
                    <h4>Class Definition</h4>
                    <code>class Person:
    def __init__(self, name):
        self.name = name</code>
                </div>
                <div class="example" onclick="loadExample(2)">
                    <h4>List Operations</h4>
                    <code>numbers = [1, 2, 3, 4, 5]
for num in numbers:
    print(num * 2)</code>
                </div>
                <div class="example" onclick="loadExample(3)">
                    <h4>Conditional Logic</h4>
                    <code>if age >= 18:
    print("Adult")
else:
    print("Minor")</code>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        const examples = [
            `def add(a, b):
    return a + b

result = add(5, 3)
print(result)`,
            `class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def introduce(self):
        print(f"Hi, I'm {self.name} and I'm {self.age} years old")

person = Person("Alice", 30)
person.introduce()`,
            `numbers = [1, 2, 3, 4, 5]
squared = []

for num in numbers:
    squared.append(num ** 2)
    print(f"Square of {num} is {num ** 2}")

print(squared)`,
            `def check_grade(score):
    if score >= 90:
        return "A"
    elif score >= 80:
        return "B"
    elif score >= 70:
        return "C"
    else:
        return "F"

grade = check_grade(85)
print(f"Your grade is: {grade}")`
        ];

        class PythonToJavaConverter {
            constructor() {
                this.variables = new Map();
                this.functions = new Map();
                this.classes = new Map();
                this.imports = new Set();
                this.currentClass = null;
                this.indentLevel = 0;
                this.hasScanner = false;
            }

            convert(pythonCode) {
                this.reset();
                
                // Validate Python syntax first
                const validationResult = this.validatePythonCode(pythonCode);
                if (!validationResult.isValid) {
                    throw new Error(validationResult.error);
                }
                
                const lines = pythonCode.split('\n');
                
                // First pass: analyze code structure
                this.analyzeCode(lines);
                
                // Second pass: convert line by line with proper structure tracking
                const result = this.convertWithProperStructure(lines);
                
                return result;
            }

            convertWithProperStructure(lines) {
                const javaCode = [];
                let braceStack = [];
                let currentIndent = 0;
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    const trimmed = line.trim();
                    const lineIndent = this.getIndentLevel(line);
                    
                    if (!trimmed || trimmed.startsWith('#')) {
                        if (trimmed.startsWith('#')) {
                            javaCode.push('    '.repeat(currentIndent) + '//' + trimmed.substring(1));
                        }
                        continue;
                    }
                    
                    // Handle indentation changes - close braces as needed
                    while (currentIndent > lineIndent && braceStack.length > 0) {
                        currentIndent--;
                        javaCode.push('    '.repeat(currentIndent) + '}');
                        braceStack.pop();
                    }
                    
                    currentIndent = lineIndent;
                    
                    // Convert the line
                    const convertedLine = this.convertSingleLine(trimmed, currentIndent, lines, i);
                    
                    if (convertedLine) {
                        javaCode.push('    '.repeat(currentIndent) + convertedLine);
                        
                        // Track if this line opens a block
                        if (convertedLine.includes('{')) {
                            braceStack.push('block');
                            currentIndent++;
                        }
                    }
                }
                
                // Close any remaining open braces
                while (braceStack.length > 0) {
                    currentIndent--;
                    javaCode.push('    '.repeat(currentIndent) + '}');
                    braceStack.pop();
                }
                
                return this.wrapInProperJavaStructure(javaCode);
            }

            convertSingleLine(line, indent, allLines, lineIndex) {
                // Function definitions
                if (line.startsWith('def ')) {
                    return this.convertFunctionDef(line);
                }
                
                // Class definitions
                if (line.startsWith('class ')) {
                    return this.convertClassDef(line);
                }
                
                // Print statements
                if (line.startsWith('print(')) {
                    return this.convertPrintStatement(line);
                }
                
                // Variable assignments
                if (this.isVariableAssignment(line)) {
                    return this.convertVariableAssignment(line);
                }
                
                // Control structures
                if (line.startsWith('if ') || line.startsWith('elif ') || line === 'else:') {
                    return this.convertIfStatement(line);
                }
                
                // Loops
                if (line.startsWith('for ')) {
                    return this.convertForLoop(line);
                }
                
                if (line.startsWith('while ')) {
                    return this.convertWhileLoop(line);
                }
                
                // Return statements
                if (line.startsWith('return')) {
                    return this.convertReturnStatement(line);
                }
                
                // Method calls and expressions
                return this.convertExpression(line);
            }

            convertFunctionDef(line) {
                const match = line.match(/^def\s+(\w+)\s*\(([^)]*)\):/);
                if (!match) return null;
                
                const [, funcName, params] = match;
                
                if (funcName === '__init__') {
                    const javaParams = this.convertParameterList(params, true);
                    return `public ${this.currentClass}(${javaParams}) {`;
                }
                
                const funcInfo = this.functions.get(funcName);
                const returnType = funcInfo ? funcInfo.returnType : 'void';
                const javaParams = this.convertParameterList(params);
                const modifier = this.currentClass ? 'public' : 'public static';
                
                return `${modifier} ${returnType} ${funcName}(${javaParams}) {`;
            }

            convertClassDef(line) {
                const match = line.match(/^class\s+(\w+)(?:\([^)]*\))?:/);
                if (!match) return null;
                
                this.currentClass = match[1];
                return `public class ${match[1]} {`;
            }

            convertPrintStatement(line) {
                // Handle f-strings: f"Hello {name}"
                if (line.includes('f"') || line.includes("f'")) {
                    return this.convertFString(line);
                }
                
                // Regular print statements
                const match = line.match(/^print\((.+)\)$/);
                if (match) {
                    let content = match[1];
                    
                    // Convert single quotes to double quotes for strings
                    content = content.replace(/'/g, '"');
                    
                    return `System.out.println(${content});`;
                }
                
                return 'System.out.println();';
            }

            convertFString(line) {
                let result = line;
                
                // Extract the f-string content
                const fStringMatch = result.match(/print\(f["']([^"']*?)["']\)/);
                if (fStringMatch) {
                    let content = fStringMatch[1];
                    
                    // Convert {variable} to " + variable + "
                    content = content.replace(/\{([^}]+)\}/g, '" + $1 + "');
                    
                    // Clean up extra concatenations
                    content = content.replace(/^" \+ /, '');
                    content = content.replace(/ \+ "$/, '');
                    content = content.replace(/ \+ "" \+ /g, ' + ');
                    
                    // If no variables, just return the string
                    if (!content.includes(' + ')) {
                        content = '"' + content + '"';
                    } else {
                        // Ensure proper string formatting
                        if (!content.startsWith('"')) {
                            content = '"' + content;
                        }
                        if (!content.endsWith('"') && !content.endsWith(' + ')) {
                            content = content + '"';
                        }
                    }
                    
                    return `System.out.println(${content});`;
                }
                
                return 'System.out.println();';
            }

            convertVariableAssignment(line) {
                const match = line.match(/^(\w+)\s*=\s*(.+)$/);
                if (!match) return null;
                
                const [, varName, value] = match;
                const javaValue = this.convertPythonValue(value);
                const javaType = this.inferJavaType(value);
                
                // Check if variable already declared
                if (this.variables.has(varName)) {
                    return `${varName} = ${javaValue};`;
                } else {
                    this.variables.set(varName, javaType);
                    return `${javaType} ${varName} = ${javaValue};`;
                }
            }

            convertIfStatement(line) {
                if (line === 'else:') {
                    return '} else {';
                }
                
                if (line.startsWith('elif ')) {
                    const condition = line.substring(5, line.length - 1);
                    return `} else if (${this.convertPythonCondition(condition)}) {`;
                }
                
                if (line.startsWith('if ')) {
                    const condition = line.substring(3, line.length - 1);
                    return `if (${this.convertPythonCondition(condition)}) {`;
                }
                
                return null;
            }

            convertForLoop(line) {
                // for item in collection
                const iterMatch = line.match(/^for\s+(\w+)\s+in\s+(\w+):/);
                if (iterMatch) {
                    const [, item, collection] = iterMatch;
                    return `for (Object ${item} : ${collection}) {`;
                }
                
                // for i in range(n)
                const rangeMatch = line.match(/^for\s+(\w+)\s+in\s+range\((\d+)\):/);
                if (rangeMatch) {
                    const [, variable, limit] = rangeMatch;
                    return `for (int ${variable} = 0; ${variable} < ${limit}; ${variable}++) {`;
                }
                
                // for i in range(start, end)
                const rangeMatch2 = line.match(/^for\s+(\w+)\s+in\s+range\((\d+),\s*(\d+)\):/);
                if (rangeMatch2) {
                    const [, variable, start, end] = rangeMatch2;
                    return `for (int ${variable} = ${start}; ${variable} < ${end}; ${variable}++) {`;
                }
                
                return null;
            }

            convertWhileLoop(line) {
                const condition = line.substring(6, line.length - 1);
                return `while (${this.convertPythonCondition(condition)}) {`;
            }

            convertReturnStatement(line) {
                if (line === 'return') {
                    return 'return;';
                }
                
                const value = line.substring(6).trim();
                return `return ${this.convertPythonValue(value)};`;
            }

            convertExpression(line) {
                // Function calls
                if (line.includes('(') && line.includes(')') && !line.includes('=')) {
                    return line + ';';
                }
                
                // List operations
                if (line.includes('.append(')) {
                    return line.replace(/(\w+)\.append\(([^)]+)\)/, '$1.add($2)') + ';';
                }
                
                // Other expressions
                return line + ';';
            }

            convertParameterList(params, isConstructor = false) {
                if (!params.trim()) return '';
                
                return params.split(',').map(param => {
                    const trimmed = param.trim();
                    if (trimmed === 'self') return null;
                    return `String ${trimmed}`;
                }).filter(p => p).join(', ');
            }

            convertPythonValue(value) {
                // Handle lists
                if (value.startsWith('[') && value.endsWith(']')) {
                    if (value === '[]') {
                        this.imports.add('import java.util.ArrayList;');
                        return 'new ArrayList<>()';
                    } else {
                        this.imports.add('import java.util.Arrays;');
                        const content = value.substring(1, value.length - 1);
                        return `Arrays.asList(${content})`;
                    }
                }
                
                // Handle strings
                if (value.startsWith("'") && value.endsWith("'")) {
                    return value.replace(/'/g, '"');
                }
                
                // Handle booleans
                if (value === 'True') return 'true';
                if (value === 'False') return 'false';
                if (value === 'None') return 'null';
                
                // Handle function calls
                if (value.includes('(') && value.includes(')')) {
                    return value;
                }
                
                return value;
            }

            convertPythonCondition(condition) {
                let result = condition;
                
                // Convert logical operators
                result = result.replace(/\band\b/g, '&&');
                result = result.replace(/\bor\b/g, '||');
                result = result.replace(/\bnot\b/g, '!');
                
                // Convert equality operators
                result = result.replace(/\bis\b/g, '==');
                result = result.replace(/\bis not\b/g, '!=');
                
                return result;
            }

            inferJavaType(value) {
                if (value.startsWith('"') || value.startsWith("'")) {
                    return 'String';
                }
                
                if (value === 'True' || value === 'False') {
                    return 'boolean';
                }
                
                if (/^\d+$/.test(value)) {
                    return 'int';
                }
                
                if (/^\d+\.\d+$/.test(value)) {
                    return 'double';
                }
                
                if (value.startsWith('[')) {
                    this.imports.add('import java.util.List;');
                    return 'List<Object>';
                }
                
                return 'Object';
            }

            isVariableAssignment(line) {
                return /^\w+\s*=\s*[^=]/.test(line) && 
                       !line.includes('==') && 
                       !line.includes('!=') &&
                       !line.includes('<=') &&
                       !line.includes('>=');
            }

            getIndentLevel(line) {
                const match = line.match(/^(\s*)/);
                return match ? Math.floor(match[1].length / 4) : 0;
            }

            wrapInProperJavaStructure(javaLines) {
                let result = '';
                
                // Add imports
                if (this.imports.size > 0) {
                    result += Array.from(this.imports).sort().join('\n') + '\n\n';
                }
                
                const hasClass = javaLines.some(line => line.trim().startsWith('public class'));
                
                if (hasClass) {
                    // Already has class structure
                    result += javaLines.join('\n');
                } else {
                    // Wrap in Main class
                    result += 'public class Main {\n';
                    result += '    public static void main(String[] args) {\n';
                    
                    // Add all converted lines with proper indentation
                    for (const line of javaLines) {
                        if (line.trim()) {
                            result += '        ' + line.trim() + '\n';
                        }
                    }
                    
                    result += '    }\n';
                    result += '}';
                }
                
                return result;
            }

            // ... (validation methods remain the same)

            validatePythonCode(code) {
                const lines = code.split('\n').map(line => line.trim()).filter(line => line && !line.startsWith('#'));
                
                if (lines.length === 0) {
                    return { isValid: false, error: "No Python code found. Please enter valid Python code." };
                }

                // Check for obvious non-Python patterns
                const javaPatterns = [
                    /public\s+class\s+\w+/,
                    /public\s+static\s+void\s+main/,
                    /System\.out\.println/,
                    /private\s+\w+\s+\w+/,
                    /import\s+java\./,
                    /\w+\s+\w+\s*=\s*new\s+\w+/,
                    /\/\*[\s\S]*?\*\//,
                    /^\s*\/\//
                ];

                const cPatterns = [
                    /#include\s*<.*>/,
                    /int\s+main\s*\(/,
                    /printf\s*\(/,
                    /scanf\s*\(/,
                    /malloc\s*\(/,
                    /free\s*\(/
                ];

                const jsPatterns = [
                    /function\s+\w+\s*\(/,
                    /var\s+\w+\s*=/,
                    /let\s+\w+\s*=/,
                    /const\s+\w+\s*=/,
                    /console\.log\s*\(/,
                    /document\./,
                    /window\./
                ];

                const htmlPatterns = [
                    /<html>/i,
                    /<\/html>/i,
                    /<head>/i,
                    /<body>/i,
                    /<script>/i,
                    /<style>/i,
                    /<div[^>]*>/i
                ];

                // Check if it looks like other languages
                for (const line of lines) {
                    if (javaPatterns.some(pattern => pattern.test(line))) {
                        return { isValid: false, error: "This appears to be Java code, not Python. Please enter Python code." };
                    }
                    if (cPatterns.some(pattern => pattern.test(line))) {
                        return { isValid: false, error: "This appears to be C/C++ code, not Python. Please enter Python code." };
                    }
                    if (jsPatterns.some(pattern => pattern.test(line))) {
                        return { isValid: false, error: "This appears to be JavaScript code, not Python. Please enter Python code." };
                    }
                    if (htmlPatterns.some(pattern => pattern.test(line))) {
                        return { isValid: false, error: "This appears to be HTML code, not Python. Please enter Python code." };
                    }
                }

                // Check for basic Python syntax patterns
                let hasPythonSyntax = false;
                const pythonIndicators = [
                    /^def\s+\w+\s*\([^)]*\):/,                    // function definitions
                    /^class\s+\w+.*:/,                           // class definitions
                    /^if\s+.+:/,                                 // if statements
                    /^elif\s+.+:/,                               // elif statements
                    /^else:/,                                    // else statements
                    /^for\s+\w+\s+in\s+.+:/,                    // for loops
                    /^while\s+.+:/,                              // while loops
                    /^try:/,                                     // try blocks
                    /^except.*:/,                                // except blocks
                    /^with\s+.+:/,                               // with statements
                    /print\s*\(/,                                // print statements
                    /import\s+\w+/,                              // import statements
                    /from\s+\w+\s+import/,                       // from import statements
                    /^\s*#/,                                     // comments
                    /\w+\s*=\s*\[.*\]/,                         // list assignments
                    /\w+\s*=\s*\{.*\}/,                         // dict assignments
                    /\w+\s*=\s*\(.*\)/,                         // tuple assignments
                    /\.append\s*\(/,                             // list methods
                    /\.join\s*\(/,                               // string methods
                    /len\s*\(/,                                  // len function
                    /range\s*\(/,                                // range function
                    /return\s+/,                                 // return statements
                    /self\./,                                    // self references
                    /^@\w+/,                                     // decorators
                    /lambda\s+/,                                 // lambda expressions
                    /f["'][^"']*\{[^}]+\}/                       // f-strings
                ];

                for (const line of lines) {
                    if (pythonIndicators.some(pattern => pattern.test(line))) {
                        hasPythonSyntax = true;
                        break;
                    }
                }

                // Check for Python-style variable assignments
                if (!hasPythonSyntax) {
                    for (const line of lines) {
                        // Simple assignment without type declaration (Python style)
                        if (/^\w+\s*=\s*[^=]/.test(line) && !line.includes('==') && !line.includes('!=')) {
                            // Make sure it's not a Java-style declaration
                            if (!/^\w+\s+\w+\s*=/.test(line)) {
                                hasPythonSyntax = true;
                                break;
                            }
                        }
                    }
                }

                if (!hasPythonSyntax) {
                    return { 
                        isValid: false, 
                        error: "This doesn't appear to be valid Python code. Please check your syntax and try again.\n\nPython code should include elements like:\n‚Ä¢ def function_name():\n‚Ä¢ class ClassName:\n‚Ä¢ if condition:\n‚Ä¢ for item in list:\n‚Ä¢ print()\n‚Ä¢ Variable assignments without type declarations" 
                    };
                }

                // Check for common Python syntax errors
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    
                    // Check for missing colons
                    if (/^(if|elif|else|for|while|def|class|try|except|finally|with)\b/.test(line) && !line.endsWith(':')) {
                        return { 
                            isValid: false, 
                            error: `Line ${i + 1}: Missing colon (:) at end of statement: "${line}"\nPython requires colons after if, for, while, def, class, etc.` 
                        };
                    }

                    // Check for obvious Java syntax in Python context
                    if (line.includes(';') && !line.includes('#') && !line.includes('"') && !line.includes("'")) {
                        return { 
                            isValid: false, 
                            error: `Line ${i + 1}: Semicolons (;) are not used in Python: "${line}"\nPython uses line breaks instead of semicolons.` 
                        };
                    }

                    // Check for curly braces (common mistake from other languages)
                    if ((line.includes('{') || line.includes('}')) && !line.includes('#') && !line.includes('"') && !line.includes("'")) {
                        return { 
                            isValid: false, 
                            error: `Line ${i + 1}: Curly braces {} are not used for code blocks in Python: "${line}"\nPython uses indentation instead of braces.` 
                        };
                    }
                }

                return { isValid: true };
            }

            reset() {
                this.variables.clear();
                this.functions.clear();
                this.classes.clear();
                this.imports.clear();
                this.currentClass = null;
                this.indentLevel = 0;
            }

            analyzeCode(lines) {
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    // Detect function definitions
                    const funcMatch = line.match(/^def\s+(\w+)\s*\(([^)]*)\):/);
                    if (funcMatch) {
                        const [, name, params] = funcMatch;
                        this.functions.set(name, {
                            params: this.parseParameters(params),
                            returnType: this.inferReturnType(lines, i)
                        });
                    }
                    
                    // Detect class definitions
                    const classMatch = line.match(/^class\s+(\w+)(?:\([^)]*\))?:/);
                    if (classMatch) {
                        this.classes.set(classMatch[1], { methods: [], fields: [] });
                    }
                    
                    // Detect variable assignments
                    const varMatch = line.match(/^(\w+)\s*=\s*(.+)$/);
                    if (varMatch && !line.includes('def ') && !line.includes('class ')) {
                        const [, name, value] = varMatch;
                        this.variables.set(name, this.inferType(value.trim()));
                    }
                }
            }

            convertLine(line, lineIndex, allLines) {
                const trimmed = line.trim();
                const indent = this.getIndent(line);
                
                if (!trimmed || trimmed.startsWith('#')) {
                    return trimmed.startsWith('#') ? '    '.repeat(indent) + '//' + trimmed.substring(1) : '';
                }

                // Function definitions
                if (trimmed.startsWith('def ')) {
                    return this.convertFunction(trimmed, indent);
                }
                
                // Class definitions
                if (trimmed.startsWith('class ')) {
                    return this.convertClass(trimmed, indent);
                }
                
                // Print statements
                if (trimmed.startsWith('print(')) {
                    return this.convertPrint(trimmed, indent);
                }
                
                // Variable assignments
                if (this.isAssignment(trimmed)) {
                    return this.convertAssignment(trimmed, indent);
                }
                
                // Control structures
                if (trimmed.startsWith('if ') || trimmed.startsWith('elif ') || trimmed === 'else:') {
                    return this.convertCondition(trimmed, indent);
                }
                
                // Loops
                if (trimmed.startsWith('for ')) {
                    return this.convertForLoop(trimmed, indent);
                }
                
                if (trimmed.startsWith('while ')) {
                    return this.convertWhileLoop(trimmed, indent);
                }
                
                // Return statements
                if (trimmed.startsWith('return')) {
                    return this.convertReturn(trimmed, indent);
                }
                
                // Function calls and other statements
                return this.convertStatement(trimmed, indent);
            }

            convertFunction(line, indent) {
                const match = line.match(/^def\s+(\w+)\s*\(([^)]*)\):/);
                if (!match) return line;
                
                const [, name, params] = match;
                const funcInfo = this.functions.get(name);
                
                if (name === '__init__') {
                    const javaParams = this.convertParameters(params, true);
                    return '    '.repeat(indent) + `public ${this.currentClass || 'Main'}(${javaParams}) {`;
                }
                
                const returnType = funcInfo ? funcInfo.returnType : 'String'; // Default to String instead of void
                const javaParams = this.convertParameters(params);
                const visibility = this.currentClass ? 'public' : 'public static';
                
                return '    '.repeat(indent) + `${visibility} ${returnType} ${name}(${javaParams}) {`;
            }

            convertClass(line, indent) {
                const match = line.match(/^class\s+(\w+)(?:\([^)]*\))?:/);
                if (!match) return line;
                
                const className = match[1];
                this.currentClass = className;
                return '    '.repeat(indent) + `public class ${className} {`;
            }

            convertPrint(line, indent) {
                // Handle f-strings
                const fStringMatch = line.match(/^print\(f["']([^"']*)\{([^}]+)\}([^"']*?)["']\)$/);
                if (fStringMatch) {
                    const [, before, expr, after] = fStringMatch;
                    return '    '.repeat(indent) + `System.out.println("${before}" + ${expr} + "${after}");`;
                }
                
                // Handle regular f-strings with multiple expressions
                if (line.includes('f"') || line.includes("f'")) {
                    let converted = line.replace(/print\(f["']/, 'System.out.println("');
                    converted = converted.replace(/\{([^}]+)\}/g, '" + $1 + "');
                    converted = converted.replace(/["']\)$/, '");');
                    converted = converted.replace(/ \+ "" \+ /g, ' + ');
                    converted = converted.replace(/^(\s*)/, '');
                    return '    '.repeat(indent) + converted;
                }
                
                // Handle regular print statements
                const content = line.match(/^print\((.+)\)$/);
                if (content) {
                    return '    '.repeat(indent) + `System.out.println(${content[1]});`;
                }
                
                return '    '.repeat(indent) + line.replace('print', 'System.out.println') + ';';
            }

            convertAssignment(line, indent) {
                const match = line.match(/^(\w+)\s*=\s*(.+)$/);
                if (!match) return line;
                
                const [, varName, value] = match;
                const type = this.inferType(value);
                
                // Check if variable already declared
                if (this.variables.has(varName)) {
                    return '    '.repeat(indent) + `${varName} = ${this.convertValue(value)};`;
                } else {
                    this.variables.set(varName, type);
                    return '    '.repeat(indent) + `${type} ${varName} = ${this.convertValue(value)};`;
                }
            }

            convertCondition(line, indent) {
                if (line === 'else:') {
                    return '    '.repeat(indent - 1) + '} else {';
                }
                
                if (line.startsWith('elif ')) {
                    const condition = line.substring(5, line.length - 1);
                    return '    '.repeat(indent - 1) + `} else if (${this.convertCondition(condition)}) {`;
                }
                
                if (line.startsWith('if ')) {
                    const condition = line.substring(3, line.length - 1);
                    return '    '.repeat(indent) + `if (${this.convertExpression(condition)}) {`;
                }
                
                return line;
            }

            convertForLoop(line, indent) {
                // for item in list
                const iterMatch = line.match(/^for\s+(\w+)\s+in\s+(\w+):/);
                if (iterMatch) {
                    const [, item, collection] = iterMatch;
                    // Use String as default type for better compatibility
                    return '    '.repeat(indent) + `for (String ${item} : ${collection}) {`;
                }
                
                // for i in range(n)
                const rangeMatch = line.match(/^for\s+(\w+)\s+in\s+range\((\d+)\):/);
                if (rangeMatch) {
                    const [, var1, limit] = rangeMatch;
                    return '    '.repeat(indent) + `for (int ${var1} = 0; ${var1} < ${limit}; ${var1}++) {`;
                }
                
                // for i in range(start, end)
                const rangeMatch2 = line.match(/^for\s+(\w+)\s+in\s+range\((\d+),\s*(\d+)\):/);
                if (rangeMatch2) {
                    const [, var1, start, end] = rangeMatch2;
                    return '    '.repeat(indent) + `for (int ${var1} = ${start}; ${var1} < ${end}; ${var1}++) {`;
                }
                
                // for i in range(start, end, step)
                const rangeMatch3 = line.match(/^for\s+(\w+)\s+in\s+range\((\d+),\s*(\d+),\s*(\d+)\):/);
                if (rangeMatch3) {
                    const [, var1, start, end, step] = rangeMatch3;
                    return '    '.repeat(indent) + `for (int ${var1} = ${start}; ${var1} < ${end}; ${var1} += ${step}) {`;
                }
                
                return line;
            }

            convertWhileLoop(line, indent) {
                const condition = line.substring(6, line.length - 1);
                return '    '.repeat(indent) + `while (${this.convertExpression(condition)}) {`;
            }

            convertReturn(line, indent) {
                if (line === 'return') {
                    return '    '.repeat(indent) + 'return;';
                }
                
                const value = line.substring(6).trim();
                return '    '.repeat(indent) + `return ${this.convertValue(value)};`;
            }

            convertStatement(line, indent) {
                // Handle method calls
                if (line.includes('.append(')) {
                    const converted = line.replace(/(\w+)\.append\(([^)]+)\)/, '$1.add($2)');
                    return '    '.repeat(indent) + converted + ';';
                }
                
                // Handle list operations
                if (line.includes('.remove(')) {
                    return '    '.repeat(indent) + line + ';';
                }
                
                // Handle function calls
                if (line.includes('(') && line.includes(')') && !line.includes('=')) {
                    return '    '.repeat(indent) + line + ';';
                }
                
                // Handle closing braces
                if (this.shouldCloseBrace(line, indent)) {
                    return '    '.repeat(indent - 1) + '}';
                }
                
                return '    '.repeat(indent) + line + ';';
            }

            convertParameters(params, isConstructor = false) {
                if (!params.trim()) return '';
                
                return params.split(',').map(param => {
                    const trimmed = param.trim();
                    if (trimmed === 'self') return '';
                    
                    // Better type inference for parameters - use String as default for better compatibility
                    return `String ${trimmed}`;
                }).filter(p => p).join(', ');
            }

            convertValue(value) {
                // Handle lists
                if (value.startsWith('[') && value.endsWith(']')) {
                    if (value === '[]') {
                        this.imports.add('import java.util.ArrayList;');
                        this.imports.add('import java.util.List;');
                        return 'new ArrayList<String>()';
                    } else {
                        this.imports.add('import java.util.Arrays;');
                        this.imports.add('import java.util.List;');
                        const content = value.substring(1, value.length - 1);
                        return `Arrays.asList(${content})`;
                    }
                }
                
                // Handle strings - ensure they're properly quoted
                if ((value.startsWith('"') && value.endsWith('"')) || 
                    (value.startsWith("'") && value.endsWith("'"))) {
                    return value.replace(/'/g, '"'); // Convert single quotes to double quotes
                }
                
                // Handle boolean values
                if (value === 'True') return 'true';
                if (value === 'False') return 'false';
                if (value === 'None') return 'null';
                
                // Handle power operator - need to import Math
                if (value.includes('**')) {
                    const parts = value.split('**');
                    if (parts.length === 2) {
                        return `Math.pow(${parts[0].trim()}, ${parts[1].trim()})`;
                    }
                }
                
                // Handle method calls that need conversion
                if (value.includes('.append(')) {
                    value = value.replace(/(\w+)\.append\(([^)]+)\)/, '$1.add($2)');
                }
                
                return value;
            }

            convertExpression(expr) {
                // Convert comparison operators
                expr = expr.replace(/\band\b/g, '&&');
                expr = expr.replace(/\bor\b/g, '||');
                expr = expr.replace(/\bnot\b/g, '!');
                
                // Convert equality
                expr = expr.replace(/==/g, '==');
                expr = expr.replace(/!=/g, '!=');
                
                return expr;
            }

            inferType(value) {
                if ((value.startsWith('"') && value.endsWith('"')) || 
                    (value.startsWith("'") && value.endsWith("'"))) {
                    return 'String';
                }
                
                if (value === 'True' || value === 'False') {
                    return 'boolean';
                }
                
                if (/^\d+$/.test(value)) {
                    return 'int';
                }
                
                if (/^\d+\.\d+$/.test(value)) {
                    return 'double';
                }
                
                if (value.startsWith('[')) {
                    this.imports.add('import java.util.List;');
                    this.imports.add('import java.util.ArrayList;');
                    return 'List<Object>';
                }
                
                return 'Object';
            }

            inferReturnType(lines, funcStartIndex) {
                for (let i = funcStartIndex + 1; i < lines.length; i++) {
                    const line = lines[i].trim();
                    if (line.startsWith('def ') || line.startsWith('class ')) break;
                    
                    if (line.startsWith('return ')) {
                        const returnValue = line.substring(7).trim();
                        if (!returnValue || returnValue === 'None') return 'void';
                        
                        // Better type inference
                        if (returnValue.startsWith('"') || returnValue.startsWith("'") || returnValue.includes('f"') || returnValue.includes("f'")) {
                            return 'String';
                        }
                        if (/^\d+$/.test(returnValue)) {
                            return 'int';
                        }
                        if (/^\d+\.\d+$/.test(returnValue)) {
                            return 'double';
                        }
                        if (returnValue === 'True' || returnValue === 'False') {
                            return 'boolean';
                        }
                        if (returnValue.startsWith('[')) {
                            return 'List<String>';
                        }
                        
                        return 'String'; // Default to String for most cases
                    }
                }
                return 'void';
            }

            parseParameters(params) {
                return params.split(',').map(p => p.trim()).filter(p => p && p !== 'self');
            }

            getCollectionType(collection) {
                const varType = this.variables.get(collection);
                if (varType && varType.includes('List')) return 'Object';
                return 'int'; // Default assumption
            }

            isAssignment(line) {
                return /^\w+\s*=\s*[^=]/.test(line) && !line.includes('==') && !line.includes('!=');
            }

            getIndent(line) {
                return Math.floor((line.length - line.trimLeft().length) / 4);
            }

            shouldCloseBrace(line, indent) {
                // This is a simplified approach - in reality, you'd need more sophisticated brace tracking
                return false;
            }

            wrapInClass(javaLines) {
                let hasClass = javaLines.some(line => line.includes('public class'));
                let hasMain = javaLines.some(line => line.includes('public static void main'));
                
                let result = '';
                
                // Add imports
                if (this.imports.size > 0) {
                    result += Array.from(this.imports).join('\n') + '\n\n';
                }
                
                if (!hasClass) {
                    result += 'public class Main {\n';
                    
                    if (!hasMain) {
                        result += '    public static void main(String[] args) {\n';
                        
                        // Process each line and add proper indentation and closing braces
                        let braceCount = 0;
                        for (let i = 0; i < javaLines.length; i++) {
                            const line = javaLines[i];
                            if (line.trim()) {
                                result += '        ' + line.trim() + '\n';
                                
                                // Count braces to add closing braces later
                                const openBraces = (line.match(/\{/g) || []).length;
                                const closeBraces = (line.match(/\}/g) || []).length;
                                braceCount += openBraces - closeBraces;
                            }
                        }
                        
                        // Add missing closing braces
                        for (let i = 0; i < braceCount; i++) {
                            result += '        }\n';
                        }
                        
                        result += '    }\n';
                    } else {
                        // If there's already a main method, just add the lines
                        result += javaLines.join('\n');
                    }
                    
                    result += '}';
                } else {
                    // Handle class definitions
                    let braceCount = 0;
                    for (const line of javaLines) {
                        result += line + '\n';
                        const openBraces = (line.match(/\{/g) || []).length;
                        const closeBraces = (line.match(/\}/g) || []).length;
                        braceCount += openBraces - closeBraces;
                    }
                    
                    // Add missing closing braces
                    for (let i = 0; i < braceCount; i++) {
                        result += '}';
                        if (i < braceCount - 1) result += '\n';
                    }
                }
                
                return result;
            }
        }

        function loadExample(index) {
            document.getElementById('pythonInput').value = examples[index];
            convertCode();
        }

        function convertCode() {
            const pythonCode = document.getElementById('pythonInput').value;
            if (!pythonCode.trim()) {
                showNotification('Please enter some Python code first!', 'error');
                document.getElementById('javaOutput').textContent = 'Converted Java code will appear here...';
                return;
            }

            try {
                const converter = new PythonToJavaConverter();
                const javaCode = converter.convert(pythonCode);
                document.getElementById('javaOutput').textContent = javaCode;
                showNotification('Code converted successfully!', 'success');
            } catch (error) {
                document.getElementById('javaOutput').innerHTML = `<div style="color: #e74c3c; font-weight: bold; margin-bottom: 15px;">‚ùå Conversion Error</div><div style="color: #2c3e50; line-height: 1.5; white-space: pre-wrap;">${error.message}</div>`;
                showNotification('Invalid input detected', 'error');
            }
        }

        function clearAll() {
            document.getElementById('pythonInput').value = '';
            document.getElementById('javaOutput').textContent = 'Converted Java code will appear here...';
            showNotification('Cleared all content', 'info');
        }

        function copyOutput() {
            const output = document.getElementById('javaOutput').textContent;
            if (output === 'Converted Java code will appear here...') {
                showNotification('No code to copy! Convert some Python code first.', 'error');
                return;
            }
            
            navigator.clipboard.writeText(output).then(() => {
                showNotification('Java code copied to clipboard!', 'success');
            }).catch(() => {
                showNotification('Failed to copy code', 'error');
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification show';
            
            if (type === 'error') {
                notification.style.background = '#e74c3c';
            } else if (type === 'success') {
                notification.style.background = '#27ae60';
            } else {
                notification.style.background = '#3498db';
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Auto-convert removed - only convert when button is clicked
    </script>
</body>
</html>
